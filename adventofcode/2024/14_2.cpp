#include <bits/stdc++.h>
#define int long long

using namespace std;

const int rows = 103;
const int cols = 101;

void print(vector<string> &grid) {
    for(auto &l: grid) cout << l << "\n";
}

bool checkLine(vector<pair<int, int>> points) {
    sort(points.begin(), points.end());
    int cnt = 1;
    for(int i=1; i<points.size(); i++) {
        if (points[i].first == points[i-1].first && points[i].second == points[i-1].second + 1) {
            cnt++;
            if (cnt >= 10) return true;
        } else cnt = 1;
    }
    return false;
}

signed main() {
    ios::sync_with_stdio(0);
    cin.tie(0);
    #ifndef ONLINE_JUDGE 
        freopen("../input.txt", "r", stdin); 
        freopen("../output.txt", "w", stdout); 
    #endif

    vector<int> X, Y, VX, VY;
    string s;
    while(getline(cin, s)) {
        stringstream ss(s);
        char c; int x,y,vx,vy;
        ss >> c >> c >> y >> c >> x >> c >> c >> vy >> c >> vx;
        X.push_back(x); Y.push_back(y);
        VX.push_back(vx); VY.push_back(vy);
    }
    for(int step=0; step<10000; step++) {
        vector<string> grid(rows, string(cols, '.'));
        vector<pair<int, int>> points;
        for(int i=0; i<X.size(); i++) {
            (X[i] += VX[i]) %= rows;
            if (X[i] < 0) X[i]+=rows;
            (Y[i] += VY[i]) %= cols;
            if (Y[i] < 0) Y[i]+=cols;
            grid[X[i]][Y[i]] = '#';
            points.emplace_back(X[i], Y[i]);
        }
        if (checkLine(points)) {
            cout << "step=" << step+1 << "\n";
            print(grid);
        }
    }
    return 0;
}

/*
step=6888
.......................................#.............................................................
....................#................................................................................
..............#.......................................#..............................................
...............................#.....................................................................
................................................................................#....................
........#...........................................#................................#...............
.........................#.....................................#................................#....
...........................................................................#.........................
.....................................................................................................
...#....................#.......................................#..............................#...#.
................................................................................#....................
...#.................#..#............................................................................
.........#......#..........................#.............................................#...........
.....................................................................................................
....................#................................................................................
...............#........................#.....................................................#......
............#...................#............................................................#.......
.............#....................#..................................................................
....................................................................................................#
.................................###############################.....................................
..............#..................#.............................#.....................................
.................................#.............................#.....................................
..........................#......#.............................#.....................................
......................#.....#....#.............................#................................#....
...................#.............#..............#..............#.....................................
...............#......#..........#.............###.............#.....................................
...........#.....................#............#####............#.....#...............................
.................................#...........#######...........#.........................#......#....
.................................#..........#########..........#....................#................
.................................#............#####............#........................#............
..........................#......#...........#######...........#......#......................#.......
.................................#..........#########..........#.....................................
.................................#.........###########.........#............................#........
............#....................#........#############........#.....................................
..........#......................#..........#########..........#....#................................
.................................#.........###########.........#.....................................
.................................#........#############........#.....................................
.................................#.......###############.......#.....................................
.................................#......#################......#..........................#..........
..#................#.............#........#############........#.................................#...
...........................#.....#.......###############.......#.....................................
.....#...........................#......#################......#.....................................
.................................#.....###################.....#.....................................
.......#.............#...........#....#####################....#..................#..................
.................................#.............###.............#.....................................
...............................#.#.............###.............#.....................................
.............................#...#.............###.............#.....................................
.................................#.............................#...........................#.........
.................................#.............................#.....................................
.................................#.............................#.................#...................
.................................#.............................#........#..........................#.
.................................###############################.....................................
..............................................................................#......................
....................#................................................................................
.....#..............................................................................................#
..........................#....#..........#..............#......#........#......................#....
.....................................................................................................
...............................................#.....................#...............................
.....................................................................................................
.....................................................................................................
.......#.............................................................................................
.....................................................................................................
...............#.............................................................................#.......
.....................................................................................................
...................................#.................................................................
........................................................................................#............
....................................................#................................................
............................##.......................................................................
.........................#...........................................................................
.....................................................................................................
.....................#.....................................................#......................#..
.............#........................................#..............................................
.......#.............................................................................................
..................................................................................................#..
.....................................................................................................
.........#.......................................................#.........................#.........
.....................................................................................................
...............................................................................#.....................
.....................................................................................................
.....................................................................................................
.....................................................................................................
.........#...........................................................................................
............................#............#...........#........................#......................
.......#..................#.....#.........................#.......................#..................
..........................................................................................#.....#....
.............................#..............................................#........................
.....................................................................................................
......#...............#.................................................#............................
.....................................................................................................
.................#..........##.......................................................................
.....................................................................................................
.................................................#...................................................
..........................................................................................#........#.
.............................................................................#.......................
..............................................................#......................................
.......................#.......................#.....................................................
.............#...............................................#.......................................
.#.............................#.....................................................................
.............#.............#.........#...............................................................
...........................#.....#..............#...............................#....................
...............#.....................................................................................
...............................#.....................................................................
............................#............................................#...........................
*/